!function(){"use strict";var e={remarkable(){let e={indent_size:2};return new window.Remarkable("full",{linkify:!0,linkTarget:"",typographer:!1,langPrefix:"language-",highlight(r,n){if(r=window.hasOwnProperty(`${n}_beautify`)?window[`${n}_beautify`](r,e):r,n&&window.Prism.languages[n])try{return`<pre class="language-${n}"><code class="language-${n}">${window.Prism.highlight(r,window.Prism.languages[n],n)}</code></pre>`}catch(e){console.log(e)}return'<pre class="language-shell"><code>'+r+"</code></pre>"}})},render(e){return this.remarkable().render(e)}};const r=["jsfiddle.net"],n=new RegExp(`(https://)?(${r.join("|")})(/.+)?`,"g");var t={playgrounds:r,hasPlayground(e){const r=e.match(n);return!(!r||!r.length)&&r.filter(e=>this.playgrounds.filter(r=>e.includes(r)).length)},generateFrames(e,r){let t=e.match(n)[0];if(t.includes("jsfiddle.net")&&!/embedded\b/.test(t)){t+=`${"/"===t.substring(t.length-1)?"":"/"}embedded`}const o=document.createElement("iframe");return o.src=t,o.allowPaymentRequest=!0,o.allowFullscreen=!0,o.width="100%",o.height=400,o.frameBorder=0,o}};Element.prototype.remove=function(){this.parentElement.removeChild(this)},window.$cff={extractContentPost(e){this.removeLinkSeeMore(e);let r=e.innerText,n=e.querySelectorAll(".text_exposed_show");return n.length&&(r+=n=Array.from(n).map(e=>{let r=e.querySelectorAll("p");return r.length?Array.from(r).map(e=>e.innerText).join("\n\n"):e.innerText}).join("\n\n")),r},removeLinkSeeMore(e){let r=e.querySelectorAll(".text_exposed_hide");r.length&&r.forEach(e=>{e.remove()})},clearPost(e){e.innerHTML=""},createBlock(e,r=!1){let n=document.createElement("div");return n.className="cff",r?n.appendChild(e):(n.innerHTML=e,n)},inject(e,r){e.appendChild(r)},markdown:e,playground:t},window.onload=(()=>{function e(e){let r=0;e.forEach(e=>{let n=e.querySelector(".userContent"),t=$cff.extractContentPost(n);$cff.clearPost(n),$cff.playground.hasPlayground(t)&&(console.log("Playground found"),n.id=`post-block-${++r}`,$cff.inject(n,$cff.playground.generateFrames(t))),console.log("Playground not found"),$cff.inject(n,$cff.createBlock($cff.markdown.render(t)))})}$cff=window.$cff,e(document.querySelectorAll(".userContentWrapper")),function(){let r=new MutationObserver(r=>{r.forEach(r=>{r.addedNodes.length&&e(r.addedNodes[0].querySelectorAll(".userContentWrapper"))})}),n=document.querySelector("#contentArea")||document.querySelector("#recent_capsule_container ol");if(!n)return;r.observe(n,{childList:!0})}(),new MutationObserver(r=>{r.forEach(r=>{r.addedNodes.forEach(n=>{n.querySelectorAll&&n.querySelectorAll(".userContentWrapper").length&&e(r.addedNodes[0].querySelectorAll(".userContentWrapper"))})})}).observe(document.querySelector("#content"),{childList:!0,subtree:!0})}),console.info("CFF is Ready!")}();
